---
import { getEntry } from 'astro:content';
import BaseLayout from '../layouts/BaseLayout.astro';

// Get the publications content using Astro Content Collections
const publications = await getEntry('publications', 'index');
const { Content } = await publications.render();
---

<BaseLayout
  title={`${publications.data.title} - jeansy.org`}
  description={publications.data.description}
>
  <Fragment slot="head">
    <!-- Custom prose styling for publications -->
    <style>
      .prose a {
        color: var(--link-color);
        text-decoration: none;
      }

      .prose a:hover {
        text-decoration: underline;
      }
    </style>

    <!-- Add target="_blank" to external links -->
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const links = document.querySelectorAll('.publications-content a[href^="http"]');
        links.forEach(link => {
          link.setAttribute('target', '_blank');
          link.setAttribute('rel', 'noopener noreferrer');
        });
      });
    </script>
  </Fragment>

  <article class="max-w-3xl mx-auto">
    <header class="mb-12">
      <h1 class="text-3xl font-bold mb-4" style="line-height: 1.3;">{publications.data.title}</h1>
      <p class="text-lg" style="color: var(--text-secondary); line-height: 1.8;">
        {publications.data.description}
      </p>
    </header>

    <div class="prose prose-lg max-w-none publications-content" style="color: var(--text-secondary);">
      <Content />
    </div>

    <footer class="mt-16 pt-8 border-t" style="border-color: var(--border-color);">
      <a href="/" style="color: var(--link-color); text-decoration: none;" class="hover:underline">
        ‚Üê Back to Home
      </a>
    </footer>
  </article>
</BaseLayout>
